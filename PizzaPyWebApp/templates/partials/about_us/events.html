<!-- Event Section Images -->
<div class="flex flex-col lg:flex-row items-center justify-center bg-[#010d1e] p-8 gap-8">
    <!-- Image Section -->
    <div class="w-full p-4 lg:w-1/2">
        <img src="../../../static/images/748x498.png" alt="Team Photo" class="w-full rounded-lg shadow-lg">
    </div>
    <!-- Text Section -->
    <div class="flex flex-col w-full gap-6 p-8 text-white lg:w-1/2">
        <div class="text-yellow-500 text-[20px] font-bold">OUR EVENTS</div>
        <div class="text-[32px] lg:text-[56px] font-extrabold">Browse our past events.</div>
        <p class="text-[16px] lg:text-[18px]">
            Here are some of our past events and meet ups. If youâ€™d like to catch up on our upcoming events,
            please visit our event page.
        </p>
        <a href="https://facebook.com/pizzapycebu" target="_blank" rel="noopener noreferrer"
            class="inline-flex items-center justify-center w-64 px-6 py-3 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-700 focus:ring-opacity-50">
            View our Events
        </a>
    </div>
</div>

<!-- Scroller Section -->
<div class="flex flex-col items-center justify-center w-full px-4 md:px-8 lg:px-16">
    <div class="wrapper">
        <div class="scroller scroller-left"></div>
    </div>
</div>


<style>
    .wrapper {
        width: 90%;
        max-width: 1536px;
        margin-inline: auto;
        height: 100px;
        position: relative;
        overflow: hidden;
        mask-image: linear-gradient(to right,
                rgba(0, 0, 0, 0),
                rgba(0, 0, 0, 1) 20%,
                rgba(0, 0, 0, 1) 80%,
                rgba(0, 0, 0, 0));
        display: flex;
        align-items: center;
        margin-bottom: 2rem;
    }

    @keyframes scrollLeft {
        0% {
            transform: translateX(0);
        }

        100% {
            transform: translateX(-50%);
        }
    }

    .scroller {
        display: flex;
        width: 200%;
        height: 100px;
        align-items: center;
    }

    .scroller-left {
        animation: scrollLeft 30s linear infinite;
    }

    .scroller:hover {
        animation-play-state: paused;
    }

    /* .item {
        width: 200px;
        height: 100px;
        border-radius: 6px;
        margin-right: 20px;
        flex: 0 0 auto;
    }

    .item img {
        height: 100%;
        width: auto;
    } */

    .item {
        width: 200px;
        height: 100px;
        border-radius: 6px;
        margin-right: 20px;
        flex: 0 0 auto;
        background-color: rgba(161, 10, 10, 0.1);
        /* Temporary background for visibility */
        border: 1px solid red;
        /* Temporary border for visibility */
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .item img {
        height: 100%;
        width: auto;
        display: block;
    }
</style>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const scrollerLeft = document.querySelector('.scroller-left');

        function fetchAndPopulateEvents(url, scroller, isReverse = false) {
            console.log('Fetching events from:', url);
            fetch(url)
                .then(response => {
                    console.log('Response received:', response);
                    return response.json();
                })
                .then(data => {
                    console.log('Data received:', data);
                    if (data.events && data.events.length > 0) {
                        populateScroller(scroller, data.events, isReverse);
                    } else {
                        console.error('No event data available');
                    }
                })
                .catch(error => console.error('Error fetching events:', error));
        }

        function populateScroller(scroller, events, isReverse) {
            console.log('Populating scroller with events:', events);
            const eventsList = isReverse ? events.slice().reverse() : events;

            eventsList.forEach(event => {
                console.log('Appending event:', event);
                const item = document.createElement('a');
                item.href = event.link;
                item.className = 'item';
                item.innerHTML = `<img src="${event.image}" alt="${event.name}" class="object-contain" onerror="this.onerror=null;this.src='https://via.placeholder.com/200x100?text=Image+Not+Found';">`;
                scroller.appendChild(item);
                console.log('Appended item:', item);
            });

            // Clone items to ensure infinite scrolling effect
            const items = Array.from(scroller.children);
            items.forEach(item => {
                const clone = item.cloneNode(true);
                scroller.appendChild(clone);
                console.log('Appended clone:', clone);
            });

            console.log('Scroller populated successfully');
        }

        // Initial fetch and populate
        fetchAndPopulateEvents('../../../static/data/events.json', scrollerLeft);
    });
</script>